const information_sheet_txt = "<br><div id = 'myLabelBox' style='font-size: 24px;'> Information Sheet</div> " +
  "<br><div style = 'text-align:center; margin:auto'><b>Online studies in learning, decision-making and cognition</b>" +
  "</div>" +
  "<div class = 'myTxtBox'><br><b><u>Introduction</b></u> " +
  "<br> You are being invited to take part in a research study. Before you decide it is important for you to understand why the research is being done and what it will involve. Please take time to read the following information carefully and discuss it with others if you wish. You are free to take as much time as you like to decide whether you wish to participate." +
  "<br><br><b><u>Who is conducting this research study?</b></u> " +
  " <br> This research is being conducted by the Max Planck UCL Centre for Computational Psychiatry and Ageing Research and the Division of Psychiatr at University College London, London, UK. The lead researcher for this project is Dr Elliott Wimmer. This study has been approved by the UCL Research Ethics Committee (project ID number 3451/001) and is funded by the UK Medical Research Council." +
  "<br><br><b><u>What is the purpose of the study?</b></u> " +
  " <br> We are interested in how the adult brain controls learning and decision-making. This research aims to provide insights into how the healthy brain works to help us understand the causes of a number of different medical conditions." +
  " <br><br>Generally, the Max Planck UCL Centre for Computational Psychiatry and Ageing Research is dedicated to studying the causes of psychiatric disorders as well as the causes of individual differences in cognitive development, with an emphasis on adulthood and old age. Computational models of differences and changes in brain-behaviour relations are the Centre's major theoretical tool. The Centre's findings will provide information on how cognitive functioning can be maintained into old age and on how psychiatric disorders can be better recognized and treated more efficiently." +
  "<br><br><b><u>Who can participate in the study?</b></u> " +
  "<br>You must be 18 or over to participate in this study" +
  "<br><br><b><u>What will happen to me if I take part?</b></u> " +

  "<br>You will participate in one or more online computer games, each lasting approximately 1.5 hours per day. You will receive a set minimum compensation of £8.21 per hour, with the opportunity to receive an additional £4.00 bonus per session depending on the decisions you make in the games. In general, you will not receive payment for incomplete submissions. If you have completed the majority of the task or contact the researcher via Prolific to report a problem with the interface, you may remain eligible for compensation based on time spent. This will be paid directly through the Prolific platform as soon as data collection for this research study is completed (usually days or a few weeks). The amount may vary with the decisions you make in the games. Remember, you are free to withdraw at any time without giving a reason." +
  " <br><br>You will also be asked some questions about your feelings, attitudes and behaviour in your everyday life through the use of approved and standardised questionnaires such as an anxiety questionnaire. You will also be asked some demographic and socio-economic questions such as age or gender. This information is collected in order to help us understand if any other external factors may influence performance in this task." +
  " <br><br>For this experiment we are interested in multiple different processes in learning and decision-making. If this is session 1, after you successfully complete this session we will invite you to participate in a second session. You will be compensated for each session with £8.21 per hour and if you participate in the whole experiment, you will receive a bonus of £4 and a total payment of at least £24." +
  " <br><br>Remember, you are free to withdraw at any time without giving a reason." +

  "<br><br><b><u>What are the possible disadvantages and risks of taking part?</b></u> " +
  "<br>The task you will complete does not pose any substantial risks. You will be asked to answer some questions about mood and feelings, and we will provide information about ways to seek help should you feel affected by the issues raised by these questions. Should you wish to access any further support with regards to your mental health you can find more information on this website: https://www.nhs.uk/nhs-services/mental-health-services/where-to-get-urgent-help-for-mental-health/." +
  " <br><br>Should you wish to talk, any time of day or night, you can call 116 123 to talk to the Samaritans you can also text 'SHOUT' to 85258 to contact the Shout Crisis Text Line." +
  "<br><br><b><u>What are the possible benefits of taking part?</b></u> " +
  "<br>While there are no immediate benefits to taking part, your participation in this research will help us understand how people make decisions and learn new information and this could have benefits for our understanding of mental health problems and general cognition." +
  "<br><br><b><u>Contacts and Complaints</b></u> " +
  "<br>Please feel free to contact the research team if you have any questions about the study. If you wish to complain or have any concerns about any aspect of the way you have been approached or treated by members of staff, then the research UCL complaints mechanisms are available to you. In the first instance, please talk to the researcher <a href='mailto:a.ozkan@ucl.ac.uk'>(Dr Aysegul Ozkan)</a> or the chief investigator <a href='mailto:e.wimmer@ucl.ac.uk'>(Dr Elliott Wimmer)</a> about your complaint. If you feel that the complaint has not been resolved satisfactorily, please contact the chair of the <a href='mailto:ethics@ucl.ac.uk'> UCL Research Ethics Committee</a>. If you are concerned about how your personal data are being processed please contact the data controller who is <a href='mailto:data-protection@ucl.ac.uk'>UCL</a>. If you remain unsatisfied, you may wish to contact the Information Commissioner Office (ICO). Contact details, and details of data subject rights, are available on the <a href='https://ico.org.uk/for-organisations/uk-gdpr-guidance-and-resources/'>ICO website</a>." +
  "<br><br><b><u>What about my data?</b></u> " +

  "<br> This local privacy notice sets out the information that applies to this particular study. Further information on how UCL uses participant information can be found in our general privacy notice: For participants in research studies, click <a href='https://www.ucl.ac.uk/legal-services/privacy/ucl-general-research-participant-privacy-notice'> here</a>. The information that is required to be provided to participants under data protection legislation (GDPR and DPA 2018) is provided across both the local and general privacy notices. To help future research and make the best use of the research data you have given us (such as answers to questionnaires) we may keep your research data indefinitely and share these with other researchers or in public repositories. The data we collect will be shared and held as follows: " +
  "<br><br>•   You are free to withdraw from this session at any time by closing this tab or exiting the task – should you withdraw during the study. Your data will not be saved." +
  "<br><br>•   Following submission and anonymisation of your data, it can no longer be removed."+
  "<br><br>•   Any stored data from this study will be anonymised." +
  "<br><br>•   In publications, your data will be anonymised, so you cannot be identified." +
  "<br><br>•   In public databases, your data will be anonymised (your personal details will be removed and a code used e.g. 00001232, instead of your User ID)." +
  "<br><br>• Personal data is any information that could be used to identify you, such as your User ID. We will store your User ID securely at UCL for the duration of you completing this study. Your User ID will be used to combine datasets from the different timepoints at which you complete tasks for this study. Once you complete the final task in this study, we will replace your UserID with a randomly generated ID that is non identifying. While we have your user ID, it will be held securely at UCL and will never be shared." +
  "<br><br>The legal basis used to process your personal data will be the provision of public task (this means that the research you are taking part in is deemed to be in the public interest). We will follow the UCL and legal guidelines to safeguard your data." +
  "If there are any queries or concerns please do not hesitate to contact <a href='mailto:e.wimmer@ucl.ac.uk'>Dr Elliott Wimmer</a>." +
  "<br><br><b><u>If you are happy to proceed, please click continue button to see consent form</b></u> " + "<br><br>" + "</div>"


const break_txt = "<div style='margin:auto;width: 700px; font-size: 150%'>" +
  "<b>SHORT BREAK</font></b>" +
  "<br><br><i> Please wait 5 seconds to continue</i></div> "


const taskDone_txt = "<div style='margin:auto;width: 700px; font-size: 150%'>" +
  "<u><b>You have completed demo trials of the task</b></u><br><br></div>"

const taskFinish_txt = "<div style='margin:auto;width: 700px; font-size: 150%'>" +
  "<u><b>You have completed the experiment! Thanks for your participating.</b></u><br><br></div>"





const demo_txt =
  "<br><br><p style='font-size: 24px;'>Select your gender</p>" +
  '<div>' +
  '  <input type="radio" id="female" name="gender" value="female">' +
  '  <label for="female" style="font-size: 20px;">female</label>' +
  '</div>' +
  '<div>' +
  '  <input type="radio" id="male" name="gender" value="male">' +
  '  <label for="male" style="font-size: 20px;">male</label>' +
  '</div>' +
  '<div>' +
  '  <input type="radio" id="other" name="gender" value="other">' +
  '  <label for="other" style="font-size: 20px;">other</label>' +
  '</div>' +

  '<br><p style="font-size: 24px;">Select your age</p>' +
  '<input name="age" type="number" min="18" style="font-size: 20px;"><br><br><br>' // +

//   '<p style="font-size: 24px;">If you signed up through Prolific, please provide your Prolific ID</p>' +
//   '<div>' +
//   '  <input type="text" id="mail" name="mail" size="35" style="font-size: 20px;"><br><br>' +
//   '</div>' + "<br>"



var loaded_images = [
  'images/inst_welcome_edited.png', 'images/inst_start1_edited.png', 'images/inst_start2_edited.png', 'images/inst_start3_edited.png', 'images/inst_general_edited.png', 
  'images/inst_1.png', 'images/inst_2.png', 'images/inst_3.png', 'images/inst_4.png', 'images/inst_5.png', 
  'images/inst_break_2.png', 'images/inst_break_short.png', 'images/inst_mood_rating.png', 'images/inst_demo.png', 'images/inst_demo_finish.png',
  'images/inst_main_finish.png', 
  'images/inst_rew_conf_1.png', 'images/inst_rew_conf_2.png', 'images/inst_rew_conf_3.png', 'images/inst_rew_rate_1.png', 'images/inst_rew_rate_2.png', 
  'images/inst_timing_est_1.png', 
  'images/inst_end_exp.png', 'images/choice_trial_1.png', 'images/choice_trial_2.png', 'images/choice_trial_3.png', 'images/choice_trial_4.png', 'images/choice_trial_5.png',
  'images/choice_trial_6.png', 'images/choice_trial_7.png', 'images/choice_trial_8.png', 'images/choice_trial_9.png', 'images/choice_trial_10.png', 
  'images/choice_trial_11.png', 'images/choice_trial_12.png',
  'images/choice_trial_13.png', 'images/choice_trial_14.png', 'images/choice_trial_15.png', 'images/choice_trial_16.png', 'images/pattern_1.png', 
  'images/pattern_2.png', 'images/pattern_3.png', 'images/pattern_4.png',
  'images/pattern_5.png', 'images/pattern_6.png', 'images/pattern_7.png', 'images/pattern_8.png', 'images/demo_images/pattern_1.png', 
  'images/demo_images/choice_trial_1.png', 'images/demo_images/choice_trial_2.png'

];




var information_sheet = {
  type: "html-button-response",
  stimulus: information_sheet_txt,
  choices: ['<div style="font-size: 120%;">Click to continue</div>'],
};


var welcome = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
      <img src="images/inst_welcome_edited.png" style="width: 80vw; height:auto;">
      <br><br>
  </div>
  <br><br>
</div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var start_1 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
      <img src="images/inst_start1_edited.png" style="width: 80vw; height:auto;">
      <br><br>
  </div>
  <br><br>
</div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var start_2 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
      <img src="images/inst_start2_edited.png" style="width: 80vw; height:auto;">
      <br><br>
  </div>
  <br><br>
</div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var start_3 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
      <img src="images/inst_start3_edited.png" style="width: 80vw; height:auto;">
      <br><br>
  </div>
  <br><br>
</div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var instruct_images_all = [
		'images/inst_start1_edited.png',
		'images/inst_start2_edited.png',
		'images/inst_start3_edited.png',
		'images/inst_1.png',
		'images/inst_2.png',
		'images/inst_3.png',
		'images/inst_4.png',
		'images/inst_5.png',
		'images/inst_general_edited.png',
		'images/inst_mood_rating.png',
		'images/inst_demo.png',
		];

var pages_all = [];
for (var i = 0; i < instruct_images_all.length; i++) {
	pages_all.push('<div style="display: flex; justify-content: center; align-items: center; width: 110vh;">  <img src="' + instruct_images_all[i] + '" style="width: 100%;"> </div>')
}
var instructions_all = {
	type: 'lmdlab-instructions',
	data: {
		exp_name: "delaylearn",
		exp_stage: "instructions",
		subjectID: subjectID
	},
	pages: pages_all,
	show_clickable_nav: true,
	on_finish: function () {
		saveTaskData_learnintro()
	}
}


var general_intro = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
        <img src="images/inst_general_edited.png" style="width: 80vw; height:auto;">
        <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var trial_example_1 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
              <img src="images/inst_1.png" style="width: 80vw; height:auto;">
              <br><br>
          </div>
          <br><br>
      </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var trial_example_2 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
              <img src="images/inst_2.png" style="width: 80vw; height:auto;">
              <br><br>
          </div>
          <br><br>
      </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var trial_example_3 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_3.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var trial_example_4 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_4_edited.png" style="width: 80vw; height:auto;">
          <br><br><br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var trial_example_5 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_5_edited.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var trial_example_6 = {
  type: "html-keyboard-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_6.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['f', 'j'],
};

var inst_main_finish = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_main_finish.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var mood_instructions = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_mood_rating.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var demo_instruction = {
  type: "html-keyboard-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_demo.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['f', 'j'],
};

var demo_instruction_finish = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_demo_finish.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};



// instructions rewconf
var instruct_images_rewconf = [
		'images/inst_rew_conf_1.png',
		'images/inst_rew_conf_2.png',
		'images/inst_rew_conf_3.png',
		];
var pages_rewconf = [];
for (var i = 0; i < instruct_images_rewconf.length; i++) {
	pages_rewconf.push('<div style="display: flex; justify-content: center; align-items: center; width: 110vh;">  <img src="' + instruct_images_rewconf[i] + '" style="width: 100%;"> </div>')
}
var instructions_rewconf = {
	type: 'lmdlab-instructions',
	data: {
		exp_name: "delaylearn",
		exp_stage: "instructions",
		subjectID: subjectID
	},
	pages: pages_rewconf,
	show_clickable_nav: true,
	on_finish: function (data) {
		saveTaskData_testintro();
	}
}

var inst_rew_conf_1 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_rew_conf_1.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var inst_rew_conf_2 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_rew_conf_2.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var inst_rew_conf_3 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_rew_conf_3.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};



// instructions rewrate
var instruct_images_rewrate = [
		'images/inst_rew_rate_1.png',
		'images/inst_rew_rate_2.png',
		];
var pages_rewrate = [];
for (var i = 0; i < instruct_images_rewrate.length; i++) {
	pages_rewrate.push('<div style="display: flex; justify-content: center; align-items: center; width: 110vh;">  <img src="' + instruct_images_rewrate[i] + '" style="width: 100%;"> </div>')
}
var instructions_rewrate = {
	type: 'lmdlab-instructions',
	data: {
		exp_name: "delaylearn",
		exp_stage: "instructions",
		subjectID: subjectID
	},
	pages: pages_rewrate,
	show_clickable_nav: true,
	on_finish: function (data) {
		saveTaskData_testintro();
	}
}


var inst_rew_rate_1 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_rew_rate_1.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var inst_rew_rate_2 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_rew_rate_2.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};



// instructions timing
var instruct_images_timing = [
		'images/inst_timing_est_1.png',
    'images/inst_timing_est_2.png',
		];
var pages_timing = [];
for (var i = 0; i < instruct_images_timing.length; i++) {
	pages_timing.push('<div style="display: flex; justify-content: center; align-items: center; width: 110vh;">  <img src="' + instruct_images_timing[i] + '" style="width: 100%;"> </div>')
}
var instructions_timing = {
	type: 'lmdlab-instructions',
	data: {
		exp_name: "delaylearn",
		exp_stage: "instructions",
		subjectID: subjectID
	},
	pages: pages_timing,
	show_clickable_nav: true,
	on_finish: function (data) {
		saveTaskData_testintro();
	}
}



var inst_timing_est_1 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_timing_est_1.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var inst_timing_est_2 = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_timing_est_2.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var break_instructions = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_break_2.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};


var break_instructions_short = {
  type: "html-button-response",
  stimulus: `
  <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
  <div>
          <img src="images/inst_break_short.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};



// post-question intro about stress and sleep
var post_stress_sleep_intro = {
  type: 'html-button-response',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'instructions',
    subjectID: subjectID,
    databaseID: uid,
  },
  stimulus: "<p style='font-size: 2.4rem; line-height: 1.3'>Great job!<br><br>Next, we have a few questions about stress and sleep.<br><br></p>",
  choices: ['<font size="+2">Continue</font>'],
  on_finish: function () {
    saveTaskData_postquestionsintro()
  }
};


// state stress question 1
var stressquestion = {
	type: 'lmdlab-html-vas-response',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'state_stress',
		subjectID: subjectID,
		databaseID: uid,
	},
	stimulus: "<p style='font-size: 2.2rem; line-height: 1.3'>How would you rate your current stress level?<br><br>Use the scale below, with 1 being the least<br>stressed and 10 being the most stressed:</p><br><br>",
	labels: ['1<br>Low<br>stress', '2', '3', '4', '5', '6', '7', '8', '9', '10<br>High<br>stress'],
	scale_width: 54,
	scale_colour: 'gray',
	label_size: '1.6rem',
	post_iti: 500,
	on_finish: function () { saveTaskData_postquestions() }
};


// sleep question 1
var sleepquestion1 = {
	type: 'lmdlab-evan-quiz',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'sleep1',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, //questions_required,
	questions: [
		{
			prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Relative to normal, what was your <b>quality of sleep</b> last night?</p><br>",
			options: ['Very good', 'Good', 'Average', 'Poor', 'Very poor']
		}
	],
	on_finish: function () { saveTaskData_postquestions() }
};


// sleep question 2
var sleepquestion2 = {
	type: 'lmdlab-evan-quiz',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'sleep2',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, //questions_required,
	questions: [
		{
			prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Relative to normal, <b>how much sleep</b> did you get last night?</p><br>",
			options: ['Much more sleep', 'More sleep', 'Average', 'Less', 'Much less sleep']
		}
	],
	on_finish: function () { saveTaskData_postquestions() }
};


// sleep question 3
var sleepquestion3 = {
	type: 'lmdlab-evan-quiz',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'sleep3',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, //questions_required, 
	questions: [
		{
			prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>How would you generally rate your <b>overall sleep quality</b><br><u>in the past month</u>?</p><br>",
			options: ['Very good', 'Good', 'Average', 'Poor', 'Very poor']
		}
	],
	on_finish: function () { saveTaskData_postquestions() }
};


// // post-question intro about task
// var post_question_intro = {
//   type: 'html-keyboard-response',
//   data: {
//     exp_name: 'delaylearn',
//     exp_stage: 'instructions',
//     subjectID: subjectID,
//     databaseID: uid,
//   },
//   stimulus: "<p style='font-size: 2.2rem; line-height: 1.3'>Next, we have a few questions about the experiment.<br><br></p><p style='font-size: 2.0rem; line-height: 1.3; color: blue;'><br><br>*Press the space bar to begin*</p>",
//   choices: [' '],
//   on_finish: function () {
//     saveTaskData_postquestionsintro()
//   }
// };


// post-questionnaire instructions
var post_question_instruct = {
  type: 'html-button-response',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'instructions',
    subjectID: subjectID,
    databaseID: uid,
  },
  stimulus: "<p style='font-size: 2.2rem; line-height: 1.3'>Next, we have a few questions about the experiment.<br><br><br>These last questions are very important for our scientific<br>research, but they will not affect your compensation in any way.<br><br>We would appreciate it if you respond honestly!<br><br><br><br></p>",
  choices: ['<font size="+2">Continue</font>'],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};


// post-question 1
var post_question1 = {
  type: 'lmdlab-evan-quiz',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'survey',
    q_name: 'delay1',
    subjectID: subjectID,
    databaseID: uid,
  },
  required: true,
  questions: [{
    prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Did you notice a pattern where specific choice pairs were<br>regularly followed by either a short or long delay<br>until point feedback?<br></p><br>",
    options: ['Definitely no pattern in the feedback delays', 'Did not notice a pattern', 'Sometimes noticed a pattern', 'Definitely noticed a pattern in the feedback delays'],
  }],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};


// post-question 2
if (Math.random() > 0.5) {
  var options2_text = ['Learned much better with with longer delay', 'Longer delay', 'Shorter delay', 'Learned much better with shorter delay'];
} else {
  var options2_text = ['Learned much better with with shorter delay', 'Shorter delay', 'Longer delay', 'Learned much better with longer delay'];
}
if (Math.random() > 0.5) {
  var question2_text = ['Did you feel like you learned better when feedback points<br>came after a <b>long delay</b> or after a <b>short delay</b>?'];
} else {
  var question2_text = ['Did you feel like you learned better when feedback points<br>came after a <b>short delay</b> or after a <b>long delay</b>?'];
}
var post_question2 = {
  type: 'lmdlab-evan-quiz',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'survey',
    q_name: 'delay2',
    subjectID: subjectID,
    databaseID: uid,
  },
  required: true,
  questions: [{
    prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>" + question2_text + "<br></p><br>",
    options: options2_text,
  }],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};


// post_question3
var post_question3 = {
	type: 'lmdlab-html-vas-response',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'delay3',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, // questions_required,
	stimulus: "<p style='font-size: 2.2rem; line-height: 1.3'><br>Were you at all bothered or frustrated by<br>the longer delays to point feedback?</p><br>",
	header_size: '2rem',
	scale_colour: 'gray',
	scale_width: 60,
	labels: ['Not at all frustrated by long feedback delays', 'Somewhat frustrated', 'Very frustrated by long feedback delays'],
	label_size: '1.4rem',
	post_iti: 500,
	on_finish: function () {
		saveTaskData_postquestions()
	},
};


// post_question4
var post_question4 = {
	type: 'lmdlab-html-vas-response',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'mood1',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, // questions_required,
	stimulus: "<p style='font-size: 2.2rem; line-height: 1.3'><br>Regarding the <b>happiness ratings</b>:<br>Were you at all bothered or frustrated by<br>the ratings?</p><br>",
	header_size: '2rem',
	scale_colour: 'gray',
	scale_width: 60,
	labels: ['Not at all frustrated by mood ratings', 'Somewhat frustrated', 'Very frustrated by mood ratings'],
	label_size: '1.4rem',
	post_iti: 500,
	on_finish: function () {
		saveTaskData_postquestions()
	},
};

// mood test question 5
var post_question5 = {
  type: 'lmdlab-survey-text',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'survey',
    q_name: 'mood2',
    subjectID: subjectID,
    databaseID: uid,
  },
  required: true, // questions_required,
  questions: [{
    prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Please describe your experience of using the<br><b>happiness ratings</b> during the learning part.</p><br><br><br>",
    rows: 6
  }, ],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};


// engagement question 1
var engagement_question1 = {
	type: 'lmdlab-html-vas-response',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'engagement1',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, // questions_required,
	stimulus: '<p style="font-size: 1.8rem; line-height: 1.3;">How engaged and focused were you during this task?</p>',
	header_size: '2rem',
	scale_colour: 'gray',
	labels: ['Not at all engaged', 'Very engaged'],
	label_size: '1.4rem',
	post_iti: 500,
	on_finish: function () {
		saveTaskData_postquestions()
	},
};


// engagement question 2
var engagement_question2 = {
	type: 'lmdlab-evan-quiz',
	data: {
		exp_name: 'delaylearn',
		exp_stage: 'survey',
		q_name: 'engagement2',
		subjectID: subjectID,
		databaseID: uid,
	},
	required: true, // questions_required,
	questions: [{
		prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Did you follow the general instructions and eliminate distractions<br>in your environment while completing the task?</p><br>",
		options: ['Yes', 'Somewhat', 'A little', 'No']
	}],
	on_finish: function () {
		saveTaskData_postquestions()
	},
};


// engagement question 3
var engagement_question3 = {
  type: 'lmdlab-survey-text',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'survey',
    q_name: 'engagement3',
    subjectID: subjectID,
    databaseID: uid,
  },
  required: true, // questions_required,
  questions: [{
    prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Did you experience any instances of inattention or distraction<br>during the experiment? If so, please describe them briefly.</p><br><br><br>",
    rows: 6
  }, ],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};


// question: comments
var comment_question1 = {
  type: 'lmdlab-survey-text',
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'survey',
    q_name: 'comment1',
    subjectID: subjectID,
    databaseID: uid,
  },
  required: true, // questions_required,
  questions: [{
    prompt: "<p style='font-size: 1.8rem; line-height: 1.3'>Some feedback regarding your experience with this task would be very helpful!<br><br>What did you enjoy/not enjoy, what did you find unclear, what could we improve?</p><br><br><br>",
    rows: 6
  }, ],
  on_finish: function () {
    saveTaskData_postquestions()
  },
};

var end_instructions = {
  type: "html-button-response",
  stimulus: `
    <div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
    <div>
          <img src="images/inst_end_exp.png" style="width: 80vw; height:auto;">
          <br><br>
      </div>
      <br><br>
  </div>`,
  choices: ["<a href='https://app.prolific.co/submissions/complete?cc=C2VLUFM3'>Click to finish</a></div>"] // updated C2VLUFM3
};

var task_finish = {
  type: "html-button-response",
  stimulus: taskFinish_txt,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};

var task_done = {
  type: "html-button-response",
  stimulus: taskDone_txt,
  choices: ['<div style="font-size: 120%;">Continue</div>'],
};





var force_break = {
  type: 'html-keyboard-response',
  stimulus: break_txt,
  trial_duration: 5000

}

var pavlovia_init = {
  type: "pavlovia",
  command: "init"
};

var pavlovia_finish = {
  type: "pavlovia",
  command: "finish"
};


var consent_ops = ['Yes']
var consent_form = {
  preamble: "<div id = 'myLabelBox'>Informed consent</div>" +
    "<div style='font-size: 120%'><br>All fields necessary to participate" +
    "<br><br><u><i>If you do not agree with any of the statements, please exit the experiment by" +
    " closing the browser window.</u></i></div>",
  type: 'survey-multi-choice',
  questions: [{
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>1. I have read the information sheet, and understand what the study involves.</div>",
      options: consent_ops,
      required: true
    },
    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>2. I confirm that I am 18 years old or older.</div>",
      options: consent_ops,
      required: true
    },

    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>3. I understand that my anonymised/pseudonymised personal data can be shared with others for future research, shared in public databases and in scientific reports.</div>",
      options: consent_ops,
      required: true
    },
    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>4. I understand that my anonymised data may be used for scientific publications.</div>",
      options: consent_ops,
      required: true
    },
    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>5. I understand that I am free to withdraw from this study at any time without giving any reason.</div>",
      options: consent_ops,
      required: true
    },
    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>6. I understand that following the submission of the study it is no longer possible to withdraw my data as this will be anonymised.</div>",
      options: consent_ops,
      required: true
    },

    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>7. I understand the potential benefits and risks of participating, the support available to me should I become distressed during the research, and who to contact if I wish to lodge a complaint.</div>",
      options: consent_ops,
      required: true
    },

    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>8. I understand the inclusion and exclusion criteria in the Information Sheet. I confirm that I do not fall under the exclusion criteria.</div>",
      options: consent_ops,
      required: true
    },
    {
      prompt: "<div class = 'myTxtBox' style='font-size: 120%'>9. I agree that the research project named above has been explained to me to my satisfaction and I agree to take part in this study.</div>",
      options: consent_ops,
      required: true
    },

  ],
};



var demogr = {
  type: 'survey-html-form',
  preamble: "<div id='myLabelBox' style='font-size: 24px;'>Demographic information</div>",
  html: demo_txt
};


var pre_fix_learn = {
  type: 'html-keyboard-response',
  stimulus: '<div style="font-size:100px;">+</div>',
  choices: jsPsych.NO_KEYS,
  trial_duration: function () {
    return 3000;
  },
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'learning',
    test_part: 'pre_fixation',
    subjectID: subjectID,
    databaseID: uid,
  },
  on_finish: function (data) {
	saveTaskData_learnintro();
  }
};

var pre_fix_test = {
  type: 'html-keyboard-response',
  stimulus: '<div style="font-size:100px;">+</div>',
  choices: jsPsych.NO_KEYS,
  trial_duration: function () {
    return 3000;
  },
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'test',
    test_part: 'pre_fixation',
    subjectID: subjectID,
    databaseID: uid,
  },
};

var isi_test = {
  type: 'html-keyboard-response',
  stimulus: '',
  choices: jsPsych.NO_KEYS,
  trial_duration: function () {
    return 250;
  },
  data: {
    exp_name: 'delaylearn',
    exp_stage: 'test',
    test_part: 'isi',
    subjectID: subjectID,
    databaseID: uid,
  },
};


